%% Define the document style package
\ProvidesPackage{document}[2025/07/23 Document Package]

%% Load the kvoptions package for key-value options
\RequirePackage{kvoptions}
\SetupKeyvalOptions{
  family=document,
  prefix=document@
}
\DeclareStringOption[docs]{content}
\ProcessKeyvalOptions*

%% Load the content tex file from the specified directory
\newcommand{\addcontent}[1]{\input{\document@content/#1}}

%% Load the geometry package for page layout
\RequirePackage[margin=1in]{geometry}

% Load the fancy headers
\RequirePackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[L]{}
% \fancyhead[R]{\@lecture}
\fancyfoot[L]{}
\fancyfoot[R]{\thepage}
\fancyfoot[C]{\leftmark}

%% Load the bibliography package
\RequirePackage[backend=biber, style=apa]{biblatex}

%% Load the appendix package
\RequirePackage{appendix}

\RequirePackage{amsmath, amsfonts, amsthm, amssymb, mathtools, mathrsfs, mathdots}
\RequirePackage{graphicx}

%% Load the xcolor package for color support with 
%% the dvipsnames option providing a wide range of predefined colors
\RequirePackage[dvipsnames]{xcolor}


% \usepackage{tikz}
% \usepackage{MnSymbol}
% \usepackage{dsfont}
% \usepackage{upgreek}
% \usepackage{xparse}
% \usepackage{nameref}
% \usepackage{caption}
% \usepackage{subcaption}
% \captionsetup{labelfont = bf, labelsep = period, font = {footnotesize, sf}}
% \usepackage{float}
% \usepackage{nicefrac}
% \usepackage{arydshln}
% \usepackage{soul}
% \usepackage{multirow}
% \usepackage{multicol}
% \usepackage{indentfirst}
% \usepackage[
%     colorlinks=true,
%     allcolors=.
% ]{hyperref}
% \usepackage{multimedia}
% \usepackage{booktabs}


% %\usepackage{algorithm2e}
% \usepackage{algorithm}
% \usepackage{algpseudocode}
% \renewcommand{\algorithmicrequire}{\textbf{Input:}}
% \renewcommand{\algorithmicensure}{\textbf{Output:}}
% \algrenewcommand\alglinenumber[1]{#1:}


% \usepackage{pbox}

%----------------------------------------------------------------------------------------
%   THEOREM-LIKE ENVIRONMENTS
%----------------------------------------------------------------------------------------

%% Provides advanced control over theorem-like environments
\RequirePackage{thmtools}

%% For creating framed boxes around environments
\RequirePackage[framemethod=TikZ]{mdframed}

%% General setup for framed environments
\mdfsetup{skipabove=1em, skipbelow=0em}

%% Set the default theorem style
\theoremstyle{definition}

%% --- Custom Box Styles ---

%% Red box style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{WildStrawberry!70!black},
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=WildStrawberry, backgroundcolor=WildStrawberry!5,
    nobreak=false
  }
]{thmredbox}

%% Orange box style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{BurntOrange!70!black},
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=BurntOrange, backgroundcolor=BurntOrange!5,
    nobreak=false
  }
]{thmorangebox}

%% Green box style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{ForestGreen!70!black},
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=ForestGreen, backgroundcolor=ForestGreen!5,
    nobreak=false
  }
]{thmgreenbox}

%% Blue box style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{NavyBlue!70!black}, 
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=NavyBlue, backgroundcolor=NavyBlue!5,
    nobreak=false
  }
]{thmbluebox}

%% Blue line style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{NavyBlue!70!black}, 
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=NavyBlue, backgroundcolor=NavyBlue!2,
    nobreak=false
  }
]{thmblueline}

%% Purple box style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{Violet!70!black},
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=Violet, backgroundcolor=Violet!5,
    nobreak=false
  }
]{thmpurplebox}

%% Brown box style
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{RawSienna!70!black},
  bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=RawSienna, backgroundcolor=RawSienna!5,
    nobreak=false
  }
]{thmbrownbox}

%% Gray box style
\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{Gray!70!black}, 
  bodyfont=\normalfont,
	mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=Gray, backgroundcolor=Gray!5,
    nobreak=false
  }
]{thmgraybox}

%% --- Theorem Declarations ---

%% Definition environment
\declaretheorem[style=thmgreenbox, name=Definition, numberwithin=section]{definition}

%% Assumption environment
\declaretheorem[style=thmorangebox, name=Assumption, numberwithin=section]{assumption}

%% Conjecture environment
\declaretheorem[style=thmpurplebox, name=Conjecture, numberwithin=section]{conjecture}

%% Lemma environment 
\declaretheorem[style=thmbrownbox, name=Lemma, numberwithin=section]{lemma}

%% Theorem environment
\declaretheorem[style=thmbrownbox, name=Theorem, numberwithin=section]{theorem}

%% Corollary environment 
\declaretheorem[style=thmbrownbox, name=Corollary, numberwithin=section]{corollary}

%% Proposition environment
\declaretheorem[style=thmbrownbox, name=Proposition, numberwithin=section]{proposition}

%% Proof environment
\renewenvironment{proof}[1][\proofname]{
  \par
  \pushQED{\null\hfill\(\blacksquare\)}
	\normalfont 
  \topsep-3\p@\@plus6\p@\relax
	\trivlist
	\item[
    \hskip\labelsep
	  \color{RawSienna!70!black}\sffamily\bfseries
	  #1\@addpunct{.}
  ]\ignorespaces
	\begin{mdframed}[
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=RawSienna, backgroundcolor=RawSienna!2,
    nobreak=false
  ]
}{
	\popQED
  \endtrivlist
  \@endpefalse
	\end{mdframed}
}

%% Remark environment
\declaretheorem[style=thmredbox, name=Remark, numberwithin=section]{remark}

%% Example environment
\declaretheorem[style=thmbluebox, name=Example, numberwithin=section]{example}

%% Solution environment
\declaretheorem[style=thmblueline, name=Solution, numberwithin=section]{tmpsolution}
\newenvironment{solution}[1][]{
  \vspace{-11pt}
  \pushQED{\null\hfill\(\square\)}
  \begin{tmpsolution}
}{
  \popQED
  \end{tmpsolution}
}

%% Problem environment
\declaretheorem[style=thmgraybox, name=Problem, numberwithin=section]{problem}

% --- Hyperref Integration ---
% Ensures that hyperrefs for theorems link correctly

% \renewcommand\theHdefinition{\thesection.\arabic{definition}}
% \renewcommand\theHtheorem{\thesection.\arabic{theorem}}
% \renewcommand\theHlemma{\thesection.\arabic{lemma}}
% \renewcommand\theHproposition{\thesection.\arabic{proposition}}
% \renewcommand\theHcorollary{\thesection.\arabic{corollary}}
% \renewcommand\theHproblem{\thesection.\arabic{problem}}
% \renewcommand\theHconjecture{\thesection.\arabic{conjecture}}